p8105\_hw2\_xs2330
================
Xiao Shi
September 26, 2018

Problem 1
---------

**Import, select, and tidy data**

``` r
NYC_Transit = 
  read_csv("./data_hw2/nyc_subway.csv") %>%
  janitor::clean_names() %>%
  select(line, station_name, station_latitude, station_longitude, route1, route2, route3, route4, route5, 
         route6, route7, route8, route9, route10, route11, entry, vending, entrance_type, ada)
head(NYC_Transit)
```

    ## # A tibble: 6 x 19
    ##   line  station_name station_latitude station_longitu… route1 route2 route3
    ##   <chr> <chr>                   <dbl>            <dbl> <chr>  <chr>  <chr> 
    ## 1 4 Av… 25th St                  40.7            -74.0 R      <NA>   <NA>  
    ## 2 4 Av… 25th St                  40.7            -74.0 R      <NA>   <NA>  
    ## 3 4 Av… 36th St                  40.7            -74.0 N      R      <NA>  
    ## 4 4 Av… 36th St                  40.7            -74.0 N      R      <NA>  
    ## 5 4 Av… 36th St                  40.7            -74.0 N      R      <NA>  
    ## 6 4 Av… 45th St                  40.6            -74.0 R      <NA>   <NA>  
    ## # ... with 12 more variables: route4 <chr>, route5 <chr>, route6 <chr>,
    ## #   route7 <chr>, route8 <int>, route9 <int>, route10 <int>,
    ## #   route11 <int>, entry <chr>, vending <chr>, entrance_type <chr>,
    ## #   ada <lgl>

``` r
NYC_Transit$entry = ifelse(NYC_Transit$entry == 'YES', TRUE,FALSE)
```

The `NYC_transit` dataset contains detailed information on station, routing, staffing, ada compliance, and vending. I used the janitor package to clean up the original data, and used the select function to choose the variables that will be focused on for this analysis. The dimension is 1868 rows by 19 columns. However, the data is NOT tidy yet because the route number (variables route1 to route11) is spread across 11 columns.

**Distinct stations**

``` r
distin_line = distinct(NYC_Transit[,c("line","station_name")])
head(distin_line)
```

    ## # A tibble: 6 x 2
    ##   line     station_name
    ##   <chr>    <chr>       
    ## 1 4 Avenue 25th St     
    ## 2 4 Avenue 36th St     
    ## 3 4 Avenue 45th St     
    ## 4 4 Avenue 53rd St     
    ## 5 4 Avenue 59th St     
    ## 6 4 Avenue 77th St

The amount of distinct stations is 465

**Ada-compliant data**

``` r
distin_ada_comp = select(NYC_Transit, line, station_name, ada) %>%
  distinct() %>%
  filter(ada == "TRUE")
head(distin_ada_comp)
```

    ## # A tibble: 6 x 3
    ##   line            station_name                   ada  
    ##   <chr>           <chr>                          <lgl>
    ## 1 4 Avenue        Atlantic Av-Barclays Ctr       TRUE 
    ## 2 4 Avenue        DeKalb Av                      TRUE 
    ## 3 4 Avenue        Pacific St                     TRUE 
    ## 4 42nd St Shuttle Grand Central                  TRUE 
    ## 5 6 Avenue        34th St                        TRUE 
    ## 6 6 Avenue        47-50th Sts Rockefeller Center TRUE

There are 84 stations that are ADA compliant

**Proportion of station exits without vending that allow entrance**

``` r
distin_entry_novend = select(NYC_Transit, line, station_name, entry, vending) %>%
  distinct() %>%
  filter(vending == "NO")
head(distin_entry_novend)
```

    ## # A tibble: 6 x 4
    ##   line            station_name  entry vending
    ##   <chr>           <chr>         <lgl> <chr>  
    ## 1 4 Avenue        53rd St       FALSE NO     
    ## 2 4 Avenue        77th St       FALSE NO     
    ## 3 4 Avenue        9th St        TRUE  NO     
    ## 4 4 Avenue        Bay Ridge Av  FALSE NO     
    ## 5 42nd St Shuttle Grand Central FALSE NO     
    ## 6 6 Avenue        7th Av        TRUE  NO

``` r
prop_entry_novend = mean(distin_entry_novend$entry == "TRUE")
```

The proportion of station entrances / exits without vending allow entrance is 0.3873874

**Reformat to tidy data**

``` r
NYC_Transit = gather(NYC_Transit, key = "route_number", value = "route_name", route1:route11)
station_line_a = distinct(NYC_Transit[,c("line","station_name","route_name","ada")]) %>%
  filter(route_name == "A")
station_line_a_ada = filter(station_line_a, ada == TRUE)
```

There are 60 distinct stations that serves the A train
There are 17 distinct stations that serves the A train that are also ADA compliant

Problem 2
---------

**Read and clean Mr.Trash Wheel data**

``` r
dumps = 
  read_excel("./data_hw2/HealthyHarborWaterWheelTotals2017-9-26.xlsx",sheet = 'Mr. Trash Wheel', range = cell_cols(1:14)) %>%
  janitor::clean_names() %>%
  na.omit(dumps)
head(dumps)
```

    ## # A tibble: 6 x 14
    ##   dumpster month  year date                weight_tons volume_cubic_ya…
    ##      <dbl> <chr> <dbl> <dttm>                    <dbl>            <dbl>
    ## 1        1 May    2014 2014-05-16 00:00:00        4.31               18
    ## 2        2 May    2014 2014-05-16 00:00:00        2.74               13
    ## 3        3 May    2014 2014-05-16 00:00:00        3.45               15
    ## 4        4 May    2014 2014-05-17 00:00:00        3.1                15
    ## 5        5 May    2014 2014-05-17 00:00:00        4.06               18
    ## 6        6 May    2014 2014-05-20 00:00:00        2.71               13
    ## # ... with 8 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, glass_bottles <dbl>, grocery_bags <dbl>,
    ## #   chip_bags <dbl>, sports_balls <dbl>, homes_powered <dbl>

``` r
dumps$sports_balls = as.integer(dumps$sports_balls)
```

**Read and clean Precip data for year 2016 and 2017**

``` r
precip_2016 = read_excel("data_hw2/HealthyHarborWaterWheelTotals2017-9-26.xlsx",sheet = '2016 Precipitation',
                         range = "A2:B14") %>%
  na.omit(precip_2016)
colnames(precip_2016) = c("month", "total_precip_16")
precip_2016$year_16 = 2016

precip_2017 = read_excel("data_hw2/HealthyHarborWaterWheelTotals2017-9-26.xlsx",sheet = '2017 Precipitation',
                         range = "A2:B14") %>%
  na.omit(precip_2017)
colnames(precip_2017) = c("month", "total_precip_17")
precip_2017$year_17 = 2017
```

**Combine precip data for year 2016 and 2017**

``` r
precip_1617 = left_join(precip_2016, precip_2017,by = "month")
precip_1617$month = month.name
head(precip_1617)
```

    ## # A tibble: 6 x 5
    ##   month    total_precip_16 year_16 total_precip_17 year_17
    ##   <chr>              <dbl>   <dbl>           <dbl>   <dbl>
    ## 1 January             3.23    2016            2.34    2017
    ## 2 February            5.32    2016            1.46    2017
    ## 3 March               2.24    2016            3.57    2017
    ## 4 April               1.78    2016            3.99    2017
    ## 5 May                 5.19    2016            5.64    2017
    ## 6 June                3.2     2016            1.4     2017

**Summary of problem2 data**
The number of observations in the trash wheel data is 201 rows by 14 columns. The number of observations in the precipitation data is 12 rows by 5 columns. Key variables in the trash wheel data includes trash wheel index by `dumpster`, date of collection by `date`, weight of the specific trash wheel by `weight_tons`, and types of trash collected such as `plastic_bottles`, `chips_bag`, and `sports_balls`. Key variables in the precipitation data includes precipitation data such as `total_precip_16` and `total_precip_17` for the year 2016 and 2017, by month. The total precipitation in 2017 was 29.93. The median number of sports balls in the dumpster in 2016 was 13.

Problem 3
---------

**load data from p8105 package**

``` r
library(p8105.datasets)
```

**tidy and manipulate data**

``` r
brfss = brfss_smart2010 %>%
  janitor::clean_names() %>%
  filter(str_detect(topic, "Overall Health") == TRUE) %>%
  select(year, locationabbr, locationdesc, response, data_value) %>%
  spread(key = response, value = data_value) %>%
  janitor::clean_names() %>%
  mutate(exc_vgood = excellent + very_good)
head(brfss)
```

    ## # A tibble: 6 x 9
    ##    year locationabbr locationdesc excellent  fair  good  poor very_good
    ##   <int> <chr>        <chr>            <dbl> <dbl> <dbl> <dbl>     <dbl>
    ## 1  2002 AK           AK - Anchor…      27.9   8.6  23.8   5.9      33.7
    ## 2  2002 AL           AL - Jeffer…      18.5  12.1  32.7   5.9      30.9
    ## 3  2002 AR           AR - Pulask…      24.1  12.5  29.9   4.2      29.3
    ## 4  2002 AZ           AZ - Marico…      21.6  10.3  26.9   4.6      36.6
    ## 5  2002 AZ           AZ - Pima C…      26.6   7.5  31.9   3.9      30.1
    ## 6  2002 CA           CA - Los An…      22.7  14.3  28.7   4.5      29.8
    ## # ... with 1 more variable: exc_vgood <dbl>
